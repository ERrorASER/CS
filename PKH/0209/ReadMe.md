# 정규화
    > 처리 조건에 따라 성능이 향상되거나 저하될 수 있다. 그러나 입력,수정,삭제 성능은 향상한다.
## 제1 정규형
    > 모든 속성은 반드시 하나의 값을 가져야 한다

다음과 같은 고객 정보가 있다고 생각하자.
 주문번호   |   고객번호   |  고객명   | 상품번호   |  출고지
 ----------|-----------  | ----------| --------   |--------
  11000,11001  |  10000  |정우진      | 256,257   | 청주, 청주
  11002  | 10001     |한형식       | 256       | 청주
  11003,11004 | 10002 | 황영은       | 256,258   |청주 , 광주

  이와같이 정보를 저장하면 다음과 같은 문제가 생길 수 있다.
* 어떤 상품이 어떤 출고지에서 나오는지 헷갈릴 수 있다.

이를 위해서 고객 연락처라는 엔터티를 추가하여 다중 값에 대한 문제점을 해결.

> 주문

 주문번호   | 고객번호  |  고객명               
 ----------| --------   |----------    
  11000  | 10000 | 정우진   
  11001  | 10000 | 정우진         
  11002  | 10001 |  한형식       
  11003  |  10002 | 황영은  
  11004  |  10002 | 황영은   

> 주문상세

 주문번호   |  상품번호   | 출고지            
 ----------| ---------- |----------
  11000  |  256     |  청주
  11001  |  257       | 청주       
  11002  |  256        | 청주
  11003 |   256       | 청주
  11004  |  258        | 광주

    > 즉 제1 정규형은 한개의 값만 가지고 있어야 한다.


## 제2 정규형
    > 엔터티의 일반속성은 주식별자 전체에 종속적이어야 한다

위의 표에서 상품번호와 출고지가 중복되는 것을 볼 수 있다. 그렇지만 상품번호 같은 경우에는 주문에 따라 결정되는 정보이므로 의미를 가지고 있다.<br/>
그렇지만 <strong>출고지</strong> 같은 경우에는 상품번호에 따라 결정되는 것이지 주문번호로 인해 결정되는 것은 아닌걸 알 수 있다.

    > 함수 종속성 : 데이터들이 어떤 기준값에 의해 종속되는 현상

이와같은 점에서 생기는 문제점은 다음과 같다
* 상품명이 변경되고 업무적으로 반영해주어야 한다면, 주문상세의 중복된 상품명을 모두 변경해야 한다.
* 주문상세의 상품명을 변경한다고 해도 특정 시점에는 아직 변경되지 않은 상품명이 존재하고, 이때 들어온 트래잭션은 일관되지 않는 데이터를 조회하게 된다.

이를 위해서 상품이라는 엔터티를 추가하야 함수 종속성을 해결할 수 있다.

> 주문상세

 주문번호   |  상품번호             
 ----------| ---------- 
  11000  |  256     
  11001  |  257           
  11002  |  256     
  11003 |   256     
  11004  |  258     

  > 상품

 상품번호   |  출고지             
 ----------| ---------- 
  256  |  청주    
  257  |  청주
  258  |  광주

## 제3 정규형
    > 엔터티의 일반속성 간에는 서로 종속적이지 않는다.

위에서 주문 테이블을 보면 주문번호 테이블을 알면 고객번호를 알 수 있고, 고객번호를 알면 고객명을 알 수 있다.<br/>
즉 A값을 알 때 B값을 알 수 있고, B값을 알 때 C값을 알 수 있으면 이행적 종속이라고 말한다.<br/>

이로인해 발생하는 문제는 다음과 같다.
* 고객명이 '정우진'에서 '정세진'으로 변경하기 위해서는 주문 테이블에서 고객명을 찾아 다 바꿔야한다. 만약 '정우진'고객의 주문 내역이 많다면 성능 부하가 걸릴 것이다.

즉 그러므로 주문 엔터티로 부터 고객 엔터티를 생성해야 한다.

> 주문

 주문번호   | 고객번호               
 ----------| --------    
  11000  | 10000   
  11001  | 10000         
  11002  | 10001        
  11003  |  10002   
  11004  |  10002    
> 고객

   고객번호 | 고객명    |   고객주소         
 ----------| -------- | ---------
  10000 | 정우진    |   광주광역시
  10001 | 한형식    |   부산광역시
  10002 | 황영은    |   서울특별시

  이렇게 되면 고객 설정 변경이 주문 엔터티에 영향을 미치지는 않는다.

  ## 반정규화

   > 중복의 원리를 이용하여 데이터 조회시 성능을 향상시킨다 

   <image src="https://mblogthumb-phinf.pstatic.net/20160531_55/kmjin0111_1464688966571bG0Vx_JPEG/4.JPG?type=w2"></image><br/>
   출처 : https://m.blog.naver.com/PostView.nhn?blogId=kmjin0111&logNo=220724253910&targetKeyword=&targetRecommendationCode=1<br/>


   ## Null 속성의 이해

    > Null 값은 '공백이나 숫자 0'과는 전혀 다른 의미다. '아직 정의되지 않은 미지 값' 또는 '현재 데이터를 입력하지 못한 경우'

   COL1 | COL2    |   COL3         
 ----------| -------- | ---------
  80,000 | 80,000    |   80,000
   Null   | 0    |   15,000      
  Null | 80,000    |   95,000

  Null값의 연산은 무조건 Null이고, 가능한 연산은 IS NULL, IS NOT NULL밖에 없다.<br/>
  집계함수(SUM(), AVG(), 등)은 Null을 제외하고 집계한다.
  
